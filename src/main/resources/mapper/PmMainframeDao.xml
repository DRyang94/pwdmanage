<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.devin.pwdmanage.dao.PmMainframeDao">
    <!-- 目的：为dao接口方法提供sql语句配置 -->
    <resultMap type="PmMainframe" id="MainframeResult">
        <result property="mainframeID" column="MAINFRAME_ID"/>
        <result property="mainframeName" column="MAINFRAME_NAME"/>
        <result property="systemInfo" column="SYSTEM_INFO"/>
        <result property="systemVersion" column="SYSTEM_VERSION"/>
        <result property="ip" column="IP"/>
        <result property="port" column="PORT"/>
    </resultMap>

    <select id="findMainframe" parameterType="java.util.Map" resultMap="MainframeResult">
        select MAINFRAME_ID, MAINFRAME_NAME, SYSTEM_INFO, SYSTEM_VERSION, IP, PORT
        from
        pm_mainframe
        <where>
            <if test="mainframeID!=null and mainframeID!='' ">
                and MAINFRAME_ID like #{mainframeID}
            </if>
        </where>
        <if test="start!=null and size!=null">
        limit #{start},#{size}
    </if>
    </select>

    <select id="getTotalMainframe" parameterType="java.util.Map" resultType="java.lang.Long">
        select count(*) from pm_mainframe
        <where>
            <if test="mainframeID!=null and mainframeID!='' ">
                and MAINFRAME_ID like #{mainframeID}
            </if>
        </where>
    </select>

    <insert id="addMainframe" parameterType="PmMainframe">
        insert into pm_mainframe(MAINFRAME_ID, MAINFRAME_NAME, SYSTEM_INFO, SYSTEM_VERSION, IP, PORT)
        values(#{mainframeID},#{mainframeName},#{systemInfo},#{systemVersion},#{ip},#{port})
    </insert>

    <update id="updateMainframe" parameterType="PmMainframe">
        update pm_mainframe
        <set>
            <if test="mainframeName!=null and mainframeName!='' ">
                MAINFRAME_NAME=#{mainframeName}
            </if>
            <if test="systemInfo!=null and systemInfo!='' ">
                ,SYSTEM_INFO=#{systemInfo}
            </if>
            <if test="systemVersion!=null and systemVersion!='' ">
                ,SYSTEM_VERSION=#{systemVersion}
            </if>
            <if test="ip!=null and ip!='' ">
                ,IP=#{ip}
            </if>
            <if test="port!=null and port!='' ">
                ,PORT=#{port}
            </if>
        </set>
        where MAINFRAME_ID=#{mainframeID}
    </update>

    <delete id="deleteMainframe" parameterType="java.lang.String">
        delete from pm_mainframe
        where MAINFRAME_ID=#{mainframeID}
    </delete>

</mapper>